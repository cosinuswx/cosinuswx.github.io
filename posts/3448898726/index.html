<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="编译Android版本的FFMPEG"><meta name="keywords" content="音视频"><meta name="author" content="Cosinus Wx"><meta name="copyright" content="Cosinus Wx"><title>编译Android版本的FFMPEG | Cosinus.Wx's Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '已复制',
    error: '复制失败',
    noSupport: '浏览器不支持复制'
  }
} </script><meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="显示文章目录">显示博客信息</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">当前已读</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-编译FFMPEG的环境"><span class="toc-text">1. 编译FFMPEG的环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-脚本调整"><span class="toc-text">2. 脚本调整</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-依赖于下载"><span class="toc-text">2.1 依赖于下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-libpng"><span class="toc-text">2.2 libpng</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-libexpat"><span class="toc-text">2.3 libexpat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-fribidi"><span class="toc-text">2.4 fribidi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-编译工具链"><span class="toc-text">2.5 编译工具链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-FFMPEG"><span class="toc-text">2.5 FFMPEG</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-编译"><span class="toc-text">3. 编译</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/images/avatar.jpg"></div><div class="author-info__name text-center">Cosinus Wx</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">21</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">11</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">8</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">快速访问</div><a class="author-info-links__name text-center" href="/about">关于</a><a class="author-info-links__name text-center" href="/atom.xml">RSS</a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Cosinus.Wx's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">HOME</a><a class="site-page" href="/archives">ARCHIVES</a><a class="site-page" href="/tags">TAGS</a><a class="site-page" href="/categories">CATEGORIES</a><a class="site-page" href="/about">ABOUT</a></span><span class="pull-right"></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">编译Android版本的FFMPEG</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-13</time><span class="post-meta__separator">|</span><i class="fa fa-inbox" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/"> 音视频</a></div><div class="article-container" id="post-content"><p>编译桌面版本的FFMPEG比较简单，<code>configure</code> 之后直接 <code>make</code> 就可以了，但是编译Android版本的FFMPEG就需要使用NDK来编译了。使用NDK编译项目有三种方法：</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><ol>
<li>基于 Make 的 <a href="https://developer.android.com/ndk/guides/ndk-build.html?hl=zh-cn" target="_blank" rel="noopener">ndk-build</a>；</li>
<li><a href="https://developer.android.com/ndk/guides/cmake.html?hl=zh-cn" target="_blank" rel="noopener">CMake</a>；</li>
<li><a href="https://developer.android.com/ndk/guides/standalone_toolchain.html?hl=zh-cn" target="_blank" rel="noopener">独立工具链</a>，用于与其他编译系统集成，或与基于 <code>configure</code> 的项目搭配使用。</li>
</ol>
<a id="more"></a>

<p>使用第三种方法，就不需要修改FFMPEG的编译逻辑了，GITHUB上的 <a href="https://github.com/WritingMinds/ffmpeg-android" target="_blank" rel="noopener">ffmpeg-android</a> 就是基于第三种方法搭建的编译脚本，下面先看看怎么使用，然后简单分析下其中的逻辑。</p>
<h2 id="1-编译FFMPEG的环境"><a href="#1-编译FFMPEG的环境" class="headerlink" title="1. 编译FFMPEG的环境"></a>1. 编译FFMPEG的环境</h2><p>个人比较喜欢使用Dockerfile来搭建这种偶尔使用的环境，能够保持主机本身干净。该Dockerfile文件主要下载一些编译需要的工具，然后下载NDK，并将其解压到 <code>/root</code> 目录下，然后设置好 <code>ANDROID_NDK</code> 的环境变量。</p>
<p>不用Docker环境的话，也可以将下面的命令直接在主机执行来搭建环境。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get -y upgrade \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get -y --quiet --yes install build-essential git autoconf autopoint libtool pkg-config gperf gettext nasm yasm python-lxml unzip vim wget</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> android-ndk-r20-linux-x86_64.zip /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> unzip /root/android-ndk-r20-linux-x86_64.zip -d /root/ \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm /root/android-ndk-r20-linux-x86_64.zip \</span></span><br><span class="line"><span class="bash">    &amp;&amp; <span class="built_in">echo</span> <span class="string">"export ANDROID_NDK=/root/android-ndk-r20"</span> &gt;&gt; /root/.bashrc</span></span><br></pre></td></tr></table></figure>

<h2 id="2-脚本调整"><a href="#2-脚本调整" class="headerlink" title="2. 脚本调整"></a>2. 脚本调整</h2><p>这次编译是最新版本的FFMPEG 4.2，需要对编译脚本做一些修改才能编译通过。</p>
<h3 id="2-1-依赖于下载"><a href="#2-1-依赖于下载" class="headerlink" title="2.1 依赖于下载"></a>2.1 依赖于下载</h3><p>首先在编译执行，需要执行 <code>./init_update_libs.sh</code> 来下载一些依赖库，其中libpng和fribidi的下载链接已经失效了，我把libpng、fribidi、libexpat都改成submodule的形式引入。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[submodule "libpng"]</span><br><span class="line">	path = libpng</span><br><span class="line">	url = https://github.com/glennrp/libpng.git</span><br><span class="line">[submodule "fribidi"]</span><br><span class="line">	path = fribidi</span><br><span class="line">	url = https://github.com/fribidi/fribidi.git</span><br><span class="line">[submodule "libexpat"]</span><br><span class="line">	path = libexpat</span><br><span class="line">	url = https://github.com/libexpat/libexpat.git</span><br></pre></td></tr></table></figure>

<p>所以 <code>./init_update_libs.sh</code> 中只包含lame：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo "============================================"</span><br><span class="line">echo "Updating submodules"</span><br><span class="line">git submodule update --init</span><br><span class="line">echo "============================================"</span><br><span class="line">echo "Updating lame"</span><br><span class="line">rm -rf lame-*</span><br><span class="line"></span><br><span class="line">wget -O- http://sourceforge.net/projects/lame/files/lame/3.99/lame-3.99.5.tar.gz | tar xz</span><br><span class="line">echo "============================================"</span><br></pre></td></tr></table></figure>

<p>由于从GITHUB引入的libpng、firbidi、libexpat都是较新的版本，因此需要做一些小改动。</p>
<h3 id="2-2-libpng"><a href="#2-2-libpng" class="headerlink" title="2.2 libpng"></a>2.2 libpng</h3><p>libpng在配置的时候，需要通过 <code>enable-arm-neon</code> 来可以指定neon是否开启，有三种选项：</p>
<ol>
<li>check：内部检查是否支持neon；</li>
<li>api：默认关闭，需要调用 <code>png_set_option</code> 来开启；</li>
<li>不设置 <code>enable-arm-neon</code>，直接通过 <code>-mfpu=neon</code> 强制开启</li>
</ol>
<p>在编译armeabi-v7a-neon的时候，脚本已经在CFLAGS中增加了 <code>-mfpu=neon</code> ，也就是上面的第三种方案：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">pushd</span> libpng-1.6.21</span></span><br><span class="line">pushd libpng</span><br><span class="line">...</span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">ARM_NEON=<span class="string">"no"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  armeabi-v7a-neon)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    ARM_NEON=<span class="string">"yes"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    ;;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">esac</span></span></span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">  --with-pic \</span><br><span class="line">  --with-sysroot="$NDK_SYSROOT" \</span><br><span class="line">...</span><br><span class="line">  --enable-static \</span><br><span class="line">  --disable-shared \</span><br><span class="line">  --prefix="$&#123;TOOLCHAIN_PREFIX&#125;" \</span><br><span class="line"><span class="meta">#</span><span class="bash">删除该行  --<span class="built_in">enable</span>-arm-neon=<span class="string">"<span class="variable">$ARM_NEON</span>"</span> \</span></span><br><span class="line">  --disable-shared || exit 1</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="2-3-libexpat"><a href="#2-3-libexpat" class="headerlink" title="2.3 libexpat"></a>2.3 libexpat</h3><p>expat新版本需要再调用 <code>[buildconf.sh](http://buildconf.sh)</code> 来生成configure等内容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">. abi_settings.sh $1 $2 $3</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">pushd</span> expat-2.1.0</span></span><br><span class="line">pushd libexpat/expat</span><br><span class="line"> </span><br><span class="line">make clean</span><br><span class="line"> </span><br><span class="line">./buildconf.sh</span><br><span class="line">./configure \</span><br><span class="line">   --with-pic \</span><br><span class="line">   --with-sysroot="$NDK_SYSROOT" \</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="2-4-fribidi"><a href="#2-4-fribidi" class="headerlink" title="2.4 fribidi"></a>2.4 fribidi</h3><p>fribidi会在编译时生成文档，而生成文档，需要用到c2man，所以直接通过 <code>disable-docs</code> 开关将其关闭。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">pushd</span> fribidi-0.19.7</span></span><br><span class="line">pushd fribidi</span><br><span class="line"> </span><br><span class="line">make clean</span><br><span class="line">...</span><br><span class="line">--enable-static \</span><br><span class="line">--disable-shared \</span><br><span class="line">--disable-docs \</span><br><span class="line">--with-glib=no \</span><br></pre></td></tr></table></figure>

<h3 id="2-5-编译工具链"><a href="#2-5-编译工具链" class="headerlink" title="2.5 编译工具链"></a>2.5 编译工具链</h3><p><code>[settings.sh](http://settings.sh)</code> 中指定了需要编译的ABI。同时还指定了 <code>ANDROID_API_VERSION</code> ，该值指定了 <code>sysroot</code> 中包含的API接口，有些NDK的API需要在高版本才支持，具体见<a href="https://developer.android.com/ndk/guides/stable_apis.html" target="_blank" rel="noopener">Android NDK Native APIs</a>。我们这里将API版本改为18，是因为NDK r20最低支持的版本是16。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">SUPPORTED_ARCHITECTURES=(armeabi-v7a armeabi-v7a-neon x86)</span><br><span class="line">...</span><br><span class="line"><span class="meta">#</span><span class="bash"> ANDROID_API_VERSION=9</span></span><br><span class="line">ANDROID_API_VERSION=18</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>如果低于16，在生成standalone toolchains的时候，会报以下错误（需要修改脚本才会有错误输出，在调用 <a href="http://make-standalone-toolchain.sh/" target="_blank" rel="noopener"><code>make-standalone-toolchain.sh</code></a> 的时候，加上 <code>--verbose</code> 参数）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">9 is less than minimum platform for arm (16)</span><br><span class="line">ERROR: Failed to create toolchain.</span><br></pre></td></tr></table></figure>

<p>NDK的新版本已经将编译工具替换为clang了，所以我们需要将 <code>abi_settings.sh</code>中的 <code>CC</code>、<code>CXX</code> 也指向clang，同时去掉 <code>CPP</code> 的定义：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">if [ $3 == 1 ]; then</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> CC=<span class="string">"<span class="variable">$&#123;CROSS_PREFIX&#125;</span>gcc --sysroot=<span class="variable">$&#123;NDK_SYSROOT&#125;</span>"</span></span></span><br><span class="line">export CC="$&#123;CROSS_PREFIX&#125;clang --sysroot=$&#123;NDK_SYSROOT&#125;"</span><br><span class="line">export LD="$&#123;CROSS_PREFIX&#125;ld"</span><br><span class="line">...</span><br><span class="line">export AS="$&#123;CROSS_PREFIX&#125;as"</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> CXX=<span class="string">"<span class="variable">$&#123;CROSS_PREFIX&#125;</span>g++"</span></span></span><br><span class="line">export CXX="$&#123;CROSS_PREFIX&#125;clang++"</span><br><span class="line">export OBJCOPY="$&#123;CROSS_PREFIX&#125;objcopy"</span><br><span class="line">export ELFEDIT="$&#123;CROSS_PREFIX&#125;elfedit"</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> CPP=<span class="string">"<span class="variable">$&#123;CROSS_PREFIX&#125;</span>cpp"</span></span></span><br><span class="line">export DWP="$&#123;CROSS_PREFIX&#125;dwp"</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="2-5-FFMPEG"><a href="#2-5-FFMPEG" class="headerlink" title="2.5 FFMPEG"></a>2.5 FFMPEG</h3><p>新版本的FFMPEG取消了 <code>--disable-ffserver</code> 的开关，需要从 <code>ffmpeg_build.sh</code> 脚本中移除。同时还需要增加 <code>--disable-linux-perf</code> 开关，因为 <code>termbits.h</code> 定义了一个宏 <code>B0</code> ，而FFMPEG里面却定义了 <code>B0</code> 变量，造成两者冲突，因此增加这个开关，具体内容可以见 <a href="https://github.com/android-ndk/ndk/issues/630" target="_blank" rel="noopener">#630</a>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">--disable-debug \</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除改行 --<span class="built_in">disable</span>-ffserver \</span></span><br><span class="line">--enable-version3 \</span><br><span class="line">...</span><br><span class="line">--enable-static \</span><br><span class="line">--disable-linux-perf \</span><br><span class="line">--pkg-config="$&#123;2&#125;/ffmpeg-pkg-config" \</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="3-编译"><a href="#3-编译" class="headerlink" title="3. 编译"></a>3. 编译</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./init_update_libs.sh</span><br><span class="line">./android_build.sh</span><br></pre></td></tr></table></figure>

<p>执行 <code>./init_update_libs.sh</code> 会下载必须的依赖，执行 <code>./android_build.sh</code> 会先执行 <code>[settings.sh](http://settings.sh)</code> 来设置一些变量，其中就包括需要编译的ABIs，然后就会开始按照ABIs定义的顺序，依次编译 x264、libpng等依赖库，最后再编译FFMPEG。</p>
<p>在编译每个库之前，会调用 <code>abi_settings.sh</code> 来检查 standalone toolchain是否存在，如果不存在，则会根据当前编译的ABI和API LEVEL调用NDK中的 <a href="http://make-standalone-toolchain.sh/" target="_blank" rel="noopener"><code>make-standalone-toolchain.sh</code></a> 来生成 standalone toolchain。然后设置 <code>CC</code> 、 <code>CXX</code> 等编译工具的位置。</p>
<p>编译完成后，可以在根目录下的 <code>build</code> 找到编译结果。</p>
<p><strong>最终调整好的脚本可以在<a href="https://github.com/cosinuswx/ffmpeg-android" target="_blank" rel="noopener">GITHUB</a>找到。</strong></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Cosinus Wx</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">链接: </span><span class="post-copyright-info"><a href="https://blog.cosinuswx.com/posts/3448898726/">https://blog.cosinuswx.com/posts/3448898726/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权所有: </span><span class="post-copyright-info">除非另有说明，本博客所有文章均遵循<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a>协议.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/posts/3554715587/"><i class="fa fa-chevron-left">  </i><span>Android延时任务精度问题</span></a></div><div class="next-post pull-right"><a href="/posts/2782435118/"><span>Xcode 10 迁移心得</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By Cosinus Wx</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html>